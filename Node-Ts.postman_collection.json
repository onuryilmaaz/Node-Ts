{
  "info": {
    "_postman_id": "f6c7b3b0-6f42-4bda-bd4c-6f6d3f7e1f9c",
    "name": "Node-Ts API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "codex-cli"
  },
  "variable": [
    { "key": "baseUrl", "value": "http://localhost:3000" },
    { "key": "accessToken", "value": "" },
    { "key": "refreshToken", "value": "" },
    { "key": "userId", "value": "" },
    { "key": "targetUserId", "value": "" },
    { "key": "roleId", "value": "" },
    { "key": "sessionId", "value": "" }
  ],
  "item": [
    {
      "name": "General",
      "item": [
        {
          "name": "Health",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            }
          },
          "response": []
        },
        {
          "name": "Me (whoami)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/me",
              "host": ["{{baseUrl}}"],
              "path": ["me"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"Example123!\",\n  \"firstName\": \"Test\",\n  \"lastName\": \"User\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            }
          },
          "response": []
        },
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"Example123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json.accessToken) pm.environment.set(\"accessToken\", json.accessToken);",
                  "if (json.refreshToken) pm.environment.set(\"refreshToken\", json.refreshToken);",
                  "if (json.user && json.user.id) pm.environment.set(\"userId\", json.user.id);"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Refresh",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "refresh"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json.accessToken) pm.environment.set(\"accessToken\", json.accessToken);",
                  "if (json.refreshToken) pm.environment.set(\"refreshToken\", json.refreshToken);"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "logout"]
            }
          },
          "response": []
        },
        {
          "name": "Verify Email",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"code\": \"123456\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/verify-email",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "verify-email"]
            }
          },
          "response": []
        },
        {
          "name": "Resend Email OTP",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/resend-email-otp",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "resend-email-otp"]
            }
          },
          "response": []
        },
        {
          "name": "Forgot Password",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/forgot-password",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "forgot-password"]
            }
          },
          "response": []
        },
        {
          "name": "Reset Password",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"otp\": \"123456\",\n  \"newPassword\": \"Example123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/reset-password",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "reset-password"]
            }
          },
          "response": []
        },
        {
          "name": "Change Email - Request",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"newEmail\": \"new@example.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/change-email/request",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "change-email", "request"]
            }
          },
          "response": []
        },
        {
          "name": "Change Email - Confirm",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"otp\": \"123456\",\n  \"newEmail\": \"new@example.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/change-email/confirm",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "change-email", "confirm"]
            }
          },
          "response": []
        },
        {
          "name": "List Sessions",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/sessions",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "sessions"]
            }
          },
          "response": []
        },
        {
          "name": "Revoke Session",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"sessionId\": \"{{sessionId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/sessions/revoke",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "sessions", "revoke"]
            }
          },
          "response": []
        },
        {
          "name": "Revoke Other Sessions",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" },
              { "key": "x-refresh-token", "value": "{{refreshToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/sessions/revoke-others",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "sessions", "revoke-others"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "User",
      "item": [
        {
          "name": "Get Profile",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/user/profile",
              "host": ["{{baseUrl}}"],
              "path": ["user", "profile"]
            }
          },
          "response": []
        },
        {
          "name": "Change Password",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"currentPassword\": \"Example123!\",\n  \"newPassword\": \"Example123!New\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/user/change-password",
              "host": ["{{baseUrl}}"],
              "path": ["user", "change-password"]
            }
          },
          "response": []
        },
        {
          "name": "Upload Avatar",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "avatar",
                  "type": "file",
                  "src": ""
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/user/avatar",
              "host": ["{{baseUrl}}"],
              "path": ["user", "avatar"]
            }
          },
          "response": []
        },
        {
          "name": "Update Profile",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Test\",\n  \"lastName\": \"User\",\n  \"phone\": \"+905551112233\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/user/update-profile",
              "host": ["{{baseUrl}}"],
              "path": ["user", "update-profile"]
            }
          },
          "response": []
        },
        {
          "name": "Deactivate Account",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/user/deactivate",
              "host": ["{{baseUrl}}"],
              "path": ["user", "deactivate"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Admin (requires admin role)",
      "item": [
        {
          "name": "Healthy (admin echo)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/healthy",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "healthy"]
            }
          },
          "response": []
        },
        {
          "name": "List Users",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/users",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users"]
            }
          },
          "response": []
        },
        {
          "name": "Get User Detail",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/users/{{targetUserId}}",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", "{{targetUserId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Activate User",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/users/{{targetUserId}}/activate",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", "{{targetUserId}}", "activate"]
            }
          },
          "response": []
        },
        {
          "name": "Deactivate User",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/users/{{targetUserId}}/deactivate",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", "{{targetUserId}}", "deactivate"]
            }
          },
          "response": []
        },
        {
          "name": "List User Sessions (Admin)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/users/{{targetUserId}}/sessions",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", "{{targetUserId}}", "sessions"]
            }
          },
          "response": []
        },
        {
          "name": "Revoke All Sessions (Admin)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/users/{{targetUserId}}/sessions/revoke-all",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", "{{targetUserId}}", "sessions", "revoke-all"]
            }
          },
          "response": []
        },
        {
          "name": "List Roles",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/roles",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "roles"]
            }
          },
          "response": []
        },
        {
          "name": "Create Role",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"new_role\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/roles",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "roles"]
            }
          },
          "response": []
        },
        {
          "name": "Update Role",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"updated_role\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/roles/{{roleId}}",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "roles", "{{roleId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Delete Role",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/roles/{{roleId}}",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "roles", "{{roleId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Assign Role to User",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"roleId\": \"{{roleId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/users/{{targetUserId}}/roles",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", "{{targetUserId}}", "roles"]
            }
          },
          "response": []
        },
        {
          "name": "Remove Role from User",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/users/{{targetUserId}}/roles/{{roleId}}",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", "{{targetUserId}}", "roles", "{{roleId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Dashboard Stats",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/dashboard",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "dashboard"]
            }
          },
          "response": []
        }
      ]
    }
  ]
}
